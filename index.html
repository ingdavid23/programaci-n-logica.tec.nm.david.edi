<!doctype html>
<html lang="es">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Logic Programming Simulator</title>
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100%;
      width: 100%;
    }

    * {
      box-sizing: border-box;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
      width: 100%;
    }

    .header {
      text-align: center;
      color: white;
      margin-bottom: 50px;
    }

    .header h1 {
      font-size: 48px;
      margin: 0 0 10px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .header p {
      font-size: 20px;
      margin: 0;
      opacity: 0.9;
    }

    .section {
      background: white;
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .section h2 {
      font-size: 28px;
      color: #667eea;
      margin: 0 0 20px 0;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .section-icon {
      font-size: 32px;
    }

    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 25px;
      align-items: center;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    label {
      font-size: 14px;
      font-weight: 600;
      color: #333;
    }

    input[type="number"],
    input[type="text"] {
      padding: 10px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      width: 200px;
      transition: border-color 0.3s;
    }

    input[type="number"]:focus,
    input[type="text"]:focus {
      outline: none;
      border-color: #667eea;
    }

    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    button:hover {
      background: #5568d3;
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
    }

    button:active {
      transform: translateY(0);
    }

    .result-area {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 20px;
      min-height: 100px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.6;
      border-left: 4px solid #667eea;
    }

    .result-area pre {
      margin: 0;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    .visualization {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 30px;
      background: #f8f9fa;
      border-radius: 8px;
      margin-top: 20px;
      min-height: 200px;
      overflow-x: auto;
    }

    .tree-node {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .node-value {
      background: #667eea;
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 18px;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .node-children {
      display: flex;
      gap: 30px;
    }

    .tree-line {
      stroke: #667eea;
      stroke-width: 2;
    }

    .list-item {
      display: inline-block;
      background: #667eea;
      color: white;
      padding: 10px 20px;
      border-radius: 8px;
      margin: 5px;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .arrow {
      display: inline-block;
      color: #667eea;
      font-size: 24px;
      margin: 0 5px;
    }

    @media (max-width: 768px) {
      .header h1 {
        font-size: 32px;
      }

      .header p {
        font-size: 16px;
      }

      .controls {
        flex-direction: column;
        align-items: stretch;
      }

      input[type="number"],
      input[type="text"] {
        width: 100%;
      }

      button {
        width: 100%;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body>
  <div class="container">
   <header class="header">
    <h1 id="main-title">Simulador de Programaci√≥n L√≥gica</h1>
    <p id="subtitle">Explora n√∫meros, listas y √°rboles de forma interactiva</p>
   </header>
   <section class="section">
    <h2><span class="section-icon">üî¢</span><span id="numbers-title">Operaciones con N√∫meros</span></h2>
    <div class="controls">
     <div class="input-group"><label for="num1">N√∫mero 1:</label> <input type="number" id="num1" value="15">
     </div>
     <div class="input-group"><label for="num2">N√∫mero 2:</label> <input type="number" id="num2" value="8">
     </div><button onclick="calculateNumbers()">Calcular</button>
    </div>
    <div class="result-area" id="number-result">
     <pre>Los resultados aparecer√°n aqu√≠...</pre>
    </div>
   </section>
   <section class="section">
    <h2><span class="section-icon">üìù</span><span id="lists-title">Operaciones con Listas</span></h2>
    <div class="controls">
     <div class="input-group"><label for="list-input">Lista (separada por comas):</label> <input type="text" id="list-input" value="5, 2, 8, 1, 9, 3" style="width: 300px;">
     </div><button onclick="processList()">Procesar</button>
    </div>
    <div class="result-area" id="list-result">
     <pre>Los resultados aparecer√°n aqu√≠...</pre>
    </div>
    <div class="visualization" id="list-viz"></div>
   </section>
   <section class="section">
    <h2><span class="section-icon">üå≥</span><span id="trees-title">√Årboles Binarios</span></h2>
    <div class="controls">
     <div class="input-group"><label for="tree-input">Valores (separados por comas):</label> <input type="text" id="tree-input" value="8, 3, 10, 1, 6, 14" style="width: 300px;">
     </div><button onclick="buildTree()">Construir √Årbol</button>
    </div>
    <div class="result-area" id="tree-result">
     <pre>Los resultados aparecer√°n aqu√≠...</pre>
    </div>
    <div class="visualization" id="tree-viz"></div>
   </section>
  </div>
  <script>
    const defaultConfig = {
      main_title: "Simulador de Programaci√≥n L√≥gica",
      subtitle: "Explora n√∫meros, listas y √°rboles de forma interactiva",
      numbers_title: "Operaciones con N√∫meros",
      lists_title: "Operaciones con Listas",
      trees_title: "√Årboles Binarios",
      background_color: "#667eea",
      secondary_color: "#ffffff",
      text_color: "#333333",
      primary_action: "#667eea",
      secondary_action: "#764ba2",
      font_family: "Segoe UI",
      font_size: 16
    };

    async function onConfigChange(config) {
      const baseFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'Tahoma, Geneva, Verdana, sans-serif';
      const baseSize = config.font_size || defaultConfig.font_size;
      
      document.body.style.fontFamily = `${baseFont}, ${baseFontStack}`;
      document.body.style.background = `linear-gradient(135deg, ${config.background_color || defaultConfig.background_color} 0%, ${config.secondary_action || defaultConfig.secondary_action} 100%)`;
      
      document.getElementById('main-title').textContent = config.main_title || defaultConfig.main_title;
      document.getElementById('main-title').style.fontSize = `${baseSize * 3}px`;
      
      document.getElementById('subtitle').textContent = config.subtitle || defaultConfig.subtitle;
      document.getElementById('subtitle').style.fontSize = `${baseSize * 1.25}px`;
      
      document.getElementById('numbers-title').textContent = config.numbers_title || defaultConfig.numbers_title;
      document.getElementById('lists-title').textContent = config.lists_title || defaultConfig.lists_title;
      document.getElementById('trees-title').textContent = config.trees_title || defaultConfig.trees_title;
      
      const sectionTitles = document.querySelectorAll('.section h2');
      sectionTitles.forEach(title => {
        title.style.fontSize = `${baseSize * 1.75}px`;
        title.style.color = config.primary_action || defaultConfig.primary_action;
      });
      
      const sections = document.querySelectorAll('.section');
      sections.forEach(section => {
        section.style.backgroundColor = config.secondary_color || defaultConfig.secondary_color;
      });
      
      const labels = document.querySelectorAll('label');
      labels.forEach(label => {
        label.style.fontSize = `${baseSize * 0.875}px`;
        label.style.color = config.text_color || defaultConfig.text_color;
      });
      
      const buttons = document.querySelectorAll('button');
      buttons.forEach(button => {
        button.style.backgroundColor = config.primary_action || defaultConfig.primary_action;
        button.style.fontSize = `${baseSize}px`;
      });
      
      const nodeValues = document.querySelectorAll('.node-value');
      nodeValues.forEach(node => {
        node.style.backgroundColor = config.primary_action || defaultConfig.primary_action;
      });
      
      const listItems = document.querySelectorAll('.list-item');
      listItems.forEach(item => {
        item.style.backgroundColor = config.primary_action || defaultConfig.primary_action;
      });
    }

    function calculateNumbers() {
      const num1 = parseInt(document.getElementById('num1').value);
      const num2 = parseInt(document.getElementById('num2').value);
      
      const isPrime = (n) => {
        if (n < 2) return false;
        for (let i = 2; i <= Math.sqrt(n); i++) {
          if (n % i === 0) return false;
        }
        return true;
      };
      
      const factorial = (n) => {
        if (n <= 1) return 1;
        return n * factorial(n - 1);
      };
      
      const gcd = (a, b) => b === 0 ? a : gcd(b, a % b);
      
      const fibonacci = (n) => {
        if (n <= 1) return n;
        let a = 0, b = 1;
        for (let i = 2; i <= n; i++) {
          [a, b] = [b, a + b];
        }
        return b;
      };
      
      const results = `
Operaciones L√≥gicas y Matem√°ticas:
====================================

N√∫meros: ${num1} y ${num2}

Suma: ${num1} + ${num2} = ${num1 + num2}
Resta: ${num1} - ${num2} = ${num1 - num2}
Multiplicaci√≥n: ${num1} √ó ${num2} = ${num1 * num2}
Divisi√≥n: ${num1} √∑ ${num2} = ${(num1 / num2).toFixed(2)}

MCD (M√°ximo Com√∫n Divisor): ${gcd(num1, num2)}
MCM (M√≠nimo Com√∫n M√∫ltiplo): ${(num1 * num2) / gcd(num1, num2)}

¬øEs ${num1} primo?: ${isPrime(num1) ? 'S√≠ ‚úì' : 'No ‚úó'}
¬øEs ${num2} primo?: ${isPrime(num2) ? 'S√≠ ‚úì' : 'No ‚úó'}

Factorial de ${num1}: ${num1 <= 12 ? factorial(num1) : 'Demasiado grande'}
Fibonacci(${num2}): ${fibonacci(num2)}

¬øEs ${num1} par?: ${num1 % 2 === 0 ? 'S√≠ ‚úì' : 'No ‚úó'}
¬øEs ${num2} par?: ${num2 % 2 === 0 ? 'S√≠ ‚úì' : 'No ‚úó'}
      `;
      
      document.getElementById('number-result').innerHTML = `<pre>${results}</pre>`;
    }

    function processList() {
      const input = document.getElementById('list-input').value;
      const list = input.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));
      
      if (list.length === 0) {
        document.getElementById('list-result').innerHTML = '<pre>Por favor, ingresa n√∫meros v√°lidos.</pre>';
        return;
      }
      
      const sum = list.reduce((a, b) => a + b, 0);
      const avg = sum / list.length;
      const max = Math.max(...list);
      const min = Math.min(...list);
      const sorted = [...list].sort((a, b) => a - b);
      const reversed = [...list].reverse();
      
      const results = `
Operaciones con Listas:
========================

Lista original: [${list.join(', ')}]
Longitud: ${list.length}

Suma de elementos: ${sum}
Promedio: ${avg.toFixed(2)}
M√°ximo: ${max}
M√≠nimo: ${min}

Lista ordenada: [${sorted.join(', ')}]
Lista invertida: [${reversed.join(', ')}]

Primer elemento (head): ${list[0]}
√öltimo elemento (last): ${list[list.length - 1]}
Resto (tail): [${list.slice(1).join(', ')}]
      `;
      
      document.getElementById('list-result').innerHTML = `<pre>${results}</pre>`;
      
      const viz = document.getElementById('list-viz');
      viz.innerHTML = list.map(num => `<span class="list-item">${num}</span>`).join('<span class="arrow">‚Üí</span>');
    }

    class TreeNode {
      constructor(value) {
        this.value = value;
        this.left = null;
        this.right = null;
      }
    }

    function insertNode(root, value) {
      if (root === null) {
        return new TreeNode(value);
      }
      
      if (value < root.value) {
        root.left = insertNode(root.left, value);
      } else if (value > root.value) {
        root.right = insertNode(root.right, value);
      }
      
      return root;
    }

    function inorderTraversal(node, result = []) {
      if (node !== null) {
        inorderTraversal(node.left, result);
        result.push(node.value);
        inorderTraversal(node.right, result);
      }
      return result;
    }

    function preorderTraversal(node, result = []) {
      if (node !== null) {
        result.push(node.value);
        preorderTraversal(node.left, result);
        preorderTraversal(node.right, result);
      }
      return result;
    }

    function postorderTraversal(node, result = []) {
      if (node !== null) {
        postorderTraversal(node.left, result);
        postorderTraversal(node.right, result);
        result.push(node.value);
      }
      return result;
    }

    function treeHeight(node) {
      if (node === null) return 0;
      return 1 + Math.max(treeHeight(node.left), treeHeight(node.right));
    }

    function renderTree(node, x = 250, y = 50, level = 0, parentX = null, parentY = null) {
      if (node === null) return { html: '', svg: '' };
      
      const spacing = 120 / (level + 1);
      let html = `<div class="tree-node" style="position: absolute; left: ${x}px; top: ${y}px;">`;
      html += `<div class="node-value">${node.value}</div>`;
      html += '</div>';
      
      let svg = '';
      
      // Dibujar l√≠nea desde el padre
      if (parentX !== null && parentY !== null) {
        svg += `<line x1="${parentX + 25}" y1="${parentY + 50}" x2="${x + 25}" y2="${y}" class="tree-line"/>`;
      }
      
      // Renderizar hijos
      if (node.left) {
        const leftResult = renderTree(node.left, x - spacing, y + 80, level + 1, x, y);
        html += leftResult.html;
        svg += leftResult.svg;
      }
      if (node.right) {
        const rightResult = renderTree(node.right, x + spacing, y + 80, level + 1, x, y);
        html += rightResult.html;
        svg += rightResult.svg;
      }
      
      return { html, svg };
    }

    function buildTree() {
      const input = document.getElementById('tree-input').value;
      const values = input.split(',').map(x => parseInt(x.trim())).filter(x => !isNaN(x));
      
      if (values.length === 0) {
        document.getElementById('tree-result').innerHTML = '<pre>Por favor, ingresa n√∫meros v√°lidos.</pre>';
        return;
      }
      
      let root = null;
      values.forEach(val => {
        root = insertNode(root, val);
      });
      
      const inorder = inorderTraversal(root);
      const preorder = preorderTraversal(root);
      const postorder = postorderTraversal(root);
      const height = treeHeight(root);
      
      const results = `
√Årbol Binario de B√∫squeda:
===========================

Valores insertados: [${values.join(', ')}]
Nodo ra√≠z: ${root.value}
Altura del √°rbol: ${height}

Recorridos:
-----------
Inorden (Izq-Ra√≠z-Der): [${inorder.join(', ')}]
Preorden (Ra√≠z-Izq-Der): [${preorder.join(', ')}]
Postorden (Izq-Der-Ra√≠z): [${postorder.join(', ')}]

Propiedades:
------------
¬øEs √°rbol balanceado?: ${Math.abs(treeHeight(root.left) - treeHeight(root.right)) <= 1 ? 'S√≠ ‚úì' : 'No ‚úó'}
Cantidad de nodos: ${values.length}
      `;
      
      document.getElementById('tree-result').innerHTML = `<pre>${results}</pre>`;
      
      const viz = document.getElementById('tree-viz');
      viz.style.position = 'relative';
      viz.style.height = `${height * 90 + 50}px`;
      const treeData = renderTree(root);
      viz.innerHTML = `
        <svg style="position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none;">
          ${treeData.svg}
        </svg>
        ${treeData.html}
      `;
    }

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.secondary_color || defaultConfig.secondary_color,
              set: (value) => {
                config.secondary_color = value;
                window.elementSdk.setConfig({ secondary_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action || defaultConfig.primary_action,
              set: (value) => {
                config.primary_action = value;
                window.elementSdk.setConfig({ primary_action: value });
              }
            },
            {
              get: () => config.secondary_action || defaultConfig.secondary_action,
              set: (value) => {
                config.secondary_action = value;
                window.elementSdk.setConfig({ secondary_action: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ["main_title", config.main_title || defaultConfig.main_title],
          ["subtitle", config.subtitle || defaultConfig.subtitle],
          ["numbers_title", config.numbers_title || defaultConfig.numbers_title],
          ["lists_title", config.lists_title || defaultConfig.lists_title],
          ["trees_title", config.trees_title || defaultConfig.trees_title]
        ])
      });
    }

    calculateNumbers();
    processList();
    buildTree();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a7cb9aa2798576f',t:'MTc2NDY5ODQ0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
